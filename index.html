<!DOCTYPE html>
<html lang="sw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kilinge cha Dr. William</title>
    
    <!-- PWA na Fonts -->
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --gold: #D4AF37;
            --dark: #050505;
            --panel: rgba(15, 15, 15, 0.95);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: #fff;
            margin: 0;
            overflow-x: hidden;
            background-image: url('https://images.unsplash.com/photo-1517816428104-797678c7cf0c?auto=format&fit=crop&w=1500&q=80');
            background-attachment: fixed;
            background-size: cover;
        }

        /* MFUMO WA LOGIN / CODE */
        #code-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 10000;
            display: flex; justify-content: center; align-items: center;
        }
        .code-box {
            background: var(--panel); border: 2px solid var(--gold);
            padding: 30px; border-radius: 20px; text-align: center; width: 90%; max-width: 400px;
        }
        .code-input {
            width: 100%; padding: 15px; background: rgba(255,255,255,0.1);
            border: 1px solid var(--gold); border-radius: 8px; color: #fff;
            font-size: 1.5rem; text-align: center; margin: 20px 0;
        }

        /* MAIN APP */
        #main-app { display: none; }
        header { text-align: center; padding: 30px; border-bottom: 1px solid var(--gold); }
        .dr-title { font-family: 'Cinzel', serif; color: var(--gold); font-size: 2rem; margin: 0; }

        /* AI ROBOT ASSISTANT */
        .ai-robot {
            background: linear-gradient(135deg, #2c3e50, #000);
            padding: 15px; border-radius: 15px; margin: 20px auto;
            border-left: 5px solid var(--gold); display: flex; align-items: center; gap: 15px;
        }
        .robot-icon { font-size: 40px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* CARDS LOGIC */
        #results { display: none; padding: 20px; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .card {
            width: 300px; min-height: 400px; background: #111;
            border: 2px solid var(--gold); border-radius: 15px; padding: 20px;
            transition: 0.5s; cursor: pointer;
        }
        .card:hover { transform: scale(1.02); box-shadow: 0 0 20px var(--gold); }

        .btn-magic {
            background: var(--gold); color: #000; padding: 15px 30px;
            border: none; border-radius: 50px; font-weight: bold; cursor: pointer; width: 100%;
        }

        .nav-menu { display: flex; justify-content: center; gap: 10px; padding: 15px; flex-wrap: wrap; }
        .nav-btn { background: none; border: 1px solid var(--gold); color: var(--gold); padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .nav-btn.active { background: var(--gold); color: #000; }

        /* WHATSAPP FLOAT */
        .wa-float { position: fixed; bottom: 20px; right: 20px; background: #25D366; width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 9999; }
    </style>
</head>
<body>

    <!-- LOGIN OVERLAY -->
    <div id="code-overlay">
        <div class="code-box">
            <h2 style="color:var(--gold)">KILINGE CHA DR. WILLIAM</h2>
            <p>Ili kufungua, ingiza code ya kifurushi chako</p>
            <input type="text" id="access-code" class="code-input" placeholder="INGIZA CODE">
            <button class="btn-magic" onclick="validateCode()">FUNGUA KILINGE</button>
            <p style="font-size: 0.8rem; margin-top: 15px; color: #aaa;">
                Mdau (Siku 1 - BURE) | Silver (Mwezi - 2,500) | Gold (Mwaka - 5,000)
            </p>
            <button onclick="window.open('https://wa.me/255762286282?text=CODE')" style="background:none; border:none; color:var(--gold); cursor:pointer;">OMBA CODE WHATSAPP</button>
        </div>
    </div>

    <!-- APP CONTENT -->
    <div id="main-app">
        <header>
            <h1 class="dr-title">DR. WILLIAM</h1>
            <div id="timer-box" style="font-size: 12px; color: var(--gold);"></div>
        </header>

        <div class="nav-menu">
            <button class="nav-btn active" onclick="showTab('ramli')">Ramli</button>
            <button class="nav-btn" onclick="showTab('miadi')">Miadi</button>
            <button class="nav-btn" onclick="window.open('https://biotech-america-reseach.github.io/orcle/')">Kadi 3</button>
        </div>

        <!-- TAB: RAMLI -->
        <div id="tab-ramli" class="tab-content" style="padding: 20px;">
            <div style="background: var(--panel); padding: 25px; border-radius: 15px; border: 1px solid #333;">
                <h2>UFUNGUO WA NYOTA</h2>
                <label>Jina Kamili:</label>
                <input type="text" id="user-name" style="width:100%; padding:12px; margin: 10px 0; background:#222; border:1px solid #444; color:#fff;">
                
                <label>Tarehe ya Kuzaliwa:</label>
                <div style="display:flex; gap:10px; margin-top:10px;">
                    <select id="b-day" style="padding:10px; flex:1;"></select>
                    <select id="b-month" style="padding:10px; flex:1;">
                        <option value="1">Januari</option>
                        <option value="2">Februari</option>
                        <option value="3">Machi</option>
                        <option value="4">Aprili</option>
                        <option value="5">Mei</option>
                        <option value="6">Juni</option>
                        <option value="7">Julai</option>
                        <option value="8">Agosti</option>
                        <option value="9">Septemba</option>
                        <option value="10">Oktoba</option>
                        <option value="11">Novemba</option>
                        <option value="12">Desemba</option>
                    </select>
                </div>
                <button class="btn-magic" style="margin-top:20px;" onclick="calculateRamli()">PANUA NYOTA YAKO</button>
            </div>
        </div>

        <!-- TAB: MIADI (NA AI ROBOT) -->
        <div id="tab-miadi" class="tab-content" style="display:none; padding: 20px;">
            <div class="ai-robot">
                <div class="robot-icon">ðŸ¤–</div>
                <div id="ai-text">Habari! Mimi ni Daktari Cartoon. Jaza taarifa hapa chini ili nikupangie miadi na Dr. William haraka!</div>
            </div>
            <div style="background: var(--panel); padding: 20px; border-radius: 15px;">
                <input type="text" id="app-name" placeholder="Jina lako..." style="width:100%; padding:12px; margin-bottom:10px;">
                <input type="date" id="app-date" style="width:100%; padding:12px; margin-bottom:10px;">
                <textarea id="app-shida" placeholder="Elezea shida yako kidogo..." style="width:100%; padding:12px; margin-bottom:10px;"></textarea>
                <button class="btn-magic" onclick="tumaMiadi()">TUMA MIADI SASA</button>
            </div>
        </div>

        <!-- RESULTS SECTION -->
        <div id="results"></div>
    </div>

    <!-- WHATSAPP -->
    <div class="wa-float" onclick="window.open('https://wa.me/255762286282')">
        <i class="fab fa-whatsapp"></i>
    </div>

    <script>
        // --- 1. LOGIN & MEMBERSHIP SYSTEM ---
        const VALID_CODES = {
            "W001": { name: "Mdau", days: 1 },
            "W002": { name: "Silver", days: 30 },
            "W003": { name: "Gold", days: 365 }
        };

        function validateCode() {
            const input = document.getElementById('access-code').value.toUpperCase();
            if (VALID_CODES[input]) {
                const expiry = Date.now() + (VALID_CODES[input].days * 24 * 60 * 60 * 1000);
                localStorage.setItem('drWilliam_Expiry', expiry);
                localStorage.setItem('drWilliam_Plan', VALID_CODES[input].name);
                location.reload();
            } else {
                alert("Code si sahihi! Tuma neno CODE kwenda WhatsApp 0762286282");
            }
        }

        function checkAccess() {
            const expiry = localStorage.getItem('drWilliam_Expiry');
            if (expiry && Date.now() < expiry) {
                document.getElementById('code-overlay').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                startTimer(expiry);
            }
        }

        function startTimer(expiry) {
            setInterval(() => {
                const diff = expiry - Date.now();
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                document.getElementById('timer-box').innerHTML = `â³ Muda wa Kilinge: ${hours}saa ${mins}dk | Kifurushi: ${localStorage.getItem('drWilliam_Plan')}`;
            }, 1000);
        }

        // --- 2. ZODIAC DATABASE (SKELETON) ---
        // Wewe utaendelezea hapa...
        const ZODIAC_DATA = {
            1: { 
                name: "â™ˆ KONDOO (Aries)", 
                img: "https://images.unsplash.com/photo-1533036696707-887498c25389?w=600",
                good: ["1ï¸âƒ£ Kiongozi wa asili...", "2ï¸âƒ£ Jasiri...", "3ï¸âƒ£ ... (Ongeza hapa)"],
                bad: ["1ï¸âƒ£ Hasira kali...", "2ï¸âƒ£ Pupa...", "3ï¸âƒ£ ... (Ongeza hapa)"],
                health: ["1ï¸âƒ£ Kichwa...", "2ï¸âƒ£ Shinikizo...", "3ï¸âƒ£ ..."],
                careers: ["1ï¸âƒ£ Jeshi...", "2ï¸âƒ£ Biashara...", "3ï¸âƒ£ ..."]
            },
            2: { name: "â™‰ NG'OMBE (Taurus)", good: ["..."], bad: ["..."], health: ["..."], careers: ["..."] },
            // ...Ongeza mpaka 12 hapa
        };

        const LETTERS_DATA = {
            'A': "Una sifa za uongozi na mwelekeo wa mafanikio...",
            'B': "Wewe ni mtu wa siri na mwenye upendo wa familia...",
            // ...Ongeza mpaka Z hapa
        };

        // --- 3. LOGIC ZA APP ---
        function calculateRamli() {
            const name = document.getElementById('user-name').value;
            const day = parseInt(document.getElementById('b-day').value);
            const month = parseInt(document.getElementById('b-month').value);
            
            if(!name) return alert("Weka jina");

            // Tafuta nyota
            let zIndex = 1; // Default
            if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) zIndex = 1;
            else if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) zIndex = 2;
            // ... Ongeza logic ya tarehe hapa

            const data = ZODIAC_DATA[zIndex] || ZODIAC_DATA[1];
            const letter = name.charAt(0).toUpperCase();
            
            document.getElementById('tab-ramli').style.display = 'none';
            const res = document.getElementById('results');
            res.style.display = 'flex';
            
            res.innerHTML = `
                <div class="card">
                    <h3>${data.name}</h3>
                    <p><b>Sifa zako:</b><br>${data.good.join('<br>')}</p>
                    <p style="color:red"><b>Changamoto:</b><br>${data.bad.join('<br>')}</p>
                </div>
                <div class="card">
                    <h3>NYOTA YA JINA (${letter})</h3>
                    <p>${LETTERS_DATA[letter] || "Jina lako lina baraka za pekee..."}</p>
                    <button class="btn-magic" onclick="window.open('https://wa.me/255762286282?text=Majibu Yangu')">ONGEA NA DAKTARI</button>
                </div>
            `;
        }

        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-' + tab).style.display = 'block';
            document.getElementById('results').style.display = 'none';
        }

        function tumaMiadi() {
            const n = document.getElementById('app-name').value;
            const d = document.getElementById('app-date').value;
            const s = document.getElementById('app-shida').value;
            const msg = `MIADI:%0A%0AJina: ${n}%0ATarehe: ${d}%0AShida: ${s}`;
            window.open(`https://wa.me/255762286282?text=${msg}`);
        }

        // Populate days
        const daySelect = document.getElementById('b-day');
        for(let i=1; i<=31; i++) {
            let opt = document.createElement('option');
            opt.value = i; opt.innerHTML = i;
            daySelect.appendChild(opt);
        }

        checkAccess();
    </script>
</body>
</html>
